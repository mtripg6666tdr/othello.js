(function(t){function e(){const e=o("div");e.id="app_container";const v=o("div");v.id="app",e.appendChild(v),C.src="spo_ge_osero02.mp3",C.classList.add("hidden"),C.preload="auto",e.appendChild(C),document.body.appendChild(e);const y=o("div"),k=o("div");k.classList.add("sumi"),y.append(k);for(let t=0;t<8;t++){const e=o("div"),n=o("span");n.textContent=t.toString(),e.append(n),e.classList.add("thead"),y.append(e)}v.append(y);for(let e=0;e<8;e++){const n=[],s=o("div"),i=o("div");i.classList.add("lhead");const u=o("span");u.textContent=e.toString(),i.append(u),s.append(i);for(let c=0;c<8;c++){const i=o("div");i.classList.add("cell"),i.dataset.x=c.toString(),i.dataset.y=e.toString(),i.addEventListener("click",e=>{const n=e.target;try{const e=p.put({current:r.dataset.next,type:"put",x:Number(n.dataset.x),y:Number(n.dataset.y)});e.winner?(l=e.winner,t.alert(l+" won!"),g.className=""):g.classList.add("hidden"),a(),d(),h.textContent="",C.currentTime=0,C.play()}catch(t){console.error(t)}}),n.push(i),s.append(i)}c.push(n),v.append(s)}const S=s("app_container"),f=o("div");f.append(r),S.append(f);const L=o("div");L.append(i),S.append(L);const N=o("div");u.textContent="Pass",u.addEventListener("click",()=>{try{p.put({type:"pass",current:r.dataset.next}),d(),a()}catch{}}),N.append(u),S.append(N);const w=o("div");g.textContent="Reset",g.addEventListener("click",()=>{t.localStorage.removeItem(b),n(),a(),d()}),w.append(g),S.append(w);const I=o("div");I.classList.add("stat");const _=o("span");_.textContent="/",I.append(m,_,x),S.append(I);const E=o("div"),B=o("input");B.type="checkbox",document.body.className=(B.checked="true"===t.localStorage.getItem("othello.dark"))?"dark":"",B.addEventListener("change",()=>{document.body.className=B.checked?"dark":"",t.localStorage.setItem("othello.dark",String(B.checked))}),B.id="dark_chbx",E.appendChild(B);const J=o("label");J.htmlFor="dark_chbx",J.textContent="Darkmode",E.appendChild(J),S.appendChild(E);const O=o("div");O.classList.add("msg_container"),h.textContent="",h.classList.add("red"),O.append(h),S.append(O)}function n(){p=new othello.Game({});const e=t.localStorage.getItem(b);if(e)try{p.board.reset(JSON.parse(e)),l=p.board.log[p.board.log.length-1].winner}catch{}else l=null}function a(){for(let t=0;t<8;t++)for(let e=0;e<8;e++){const n=["cell"];n.push(p.board.getCell(t,e).type),p.board.put({type:"put",current:p.board.nextStone,x:t,y:e},!0)&&n.push(p.board.nextStone+"_point"),c[e][t].className=n.join(" ")}t.localStorage.setItem(b,JSON.stringify(p.board.log))}function d(){r.textContent="Next: "+(l?"-":p.board.nextStone),r.dataset.next=p.board.nextStone,i.textContent="Count: "+p.board.log.length,u.disabled=Boolean(l),m.textContent="White: "+p.board.getInfo("white").count,x.textContent="Black: "+p.board.getInfo("black").count}const o=t=>document.createElement(t),s=t=>document.getElementById(t),c=[];let p=null,l=null;const r=o("span"),i=o("span"),u=o("button"),h=o("span"),g=o("button"),x=o("span"),m=o("span"),b="othello.session",C=o("audio");e(),n(),a(),d()})(window);